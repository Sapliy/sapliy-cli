(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{4403:(e,t,s)=>{Promise.resolve().then(s.bind(s,5221))},5221:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tj});var a=s(5155),l=s(2115),r=s(1077),n=s(767),o=s(5683),i=s(7112);let c=e=>{let{isOpen:t,title:s,message:r,onConfirm:c,onCancel:d,confirmText:m="Confirm",cancelText:x="Cancel",type:u="info"}=e,g=(0,l.useRef)(null),p=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&d()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,d]),(0,a.jsx)(o.N,{children:t&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.P.div,{ref:g,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",onClick:e=>{e.target===g.current&&d()},children:(0,a.jsxs)(i.P.div,{ref:p,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:"w-full max-w-md mx-4 bg-white rounded-xl shadow-2xl border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:s}),(0,a.jsx)("button",{onClick:d,className:"p-2 cursor-pointer hover:bg-gray-100 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-gray-500"})})]}),(0,a.jsx)("div",{className:"px-6 py-4 ".concat((()=>{switch(u){case"warning":return"bg-yellow-50 text-yellow-800 border-yellow-200";case"danger":return"bg-red-50 text-red-800 border-red-200";default:return"bg-blue-50 text-blue-800 border-blue-200"}})()," border-l-4 mx-6 my-4 rounded-lg"),children:(0,a.jsx)("p",{className:"text-base leading-relaxed",children:r})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-xl border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300  rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2  focus:ring-gray-500 transition-colors",children:x}),(0,a.jsx)("button",{onClick:c,className:"px-4 cursor-pointer py-2 text-sm font-medium text-white rounded-lg \n                           focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors\n                           ".concat("danger"===u?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"warning"===u?"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"),children:m})]})]})})})})};var d=s(5686),m=s(3920),x=s(5047);let u=e=>{let{id:t,onDelete:s,onDuplicate:l,onClose:r,onMoreDetails:o,top:i,left:c,right:u,bottom:g}=e;return!1===i&&!1===g||!1===c&&!1===u?null:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-[2px] z-40",onClick:r,children:(0,a.jsxs)("div",{className:"absolute z-50 w-64 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden animate-slideIn",style:{top:!1!==i?"".concat(i,"px"):void 0,left:!1!==c?"".concat(c,"px"):void 0,right:!1!==u?"".concat(u,"px"):void 0,bottom:!1!==g?"".concat(g,"px"):void 0},onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"px-4 py-3 bg-gradient-to-r from-gray-800 to-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-white",children:"Node Actions"}),(0,a.jsx)("button",{onClick:r,className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:(0,a.jsx)(n.A,{className:"w-4 h-4 text-gray-400"})})]})}),(0,a.jsxs)("div",{className:"p-2 space-y-1",children:[(0,a.jsxs)("button",{className:"flex w-full items-center gap-2 px-3 py-2 rounded-md text-left text-sm font-medium text-red-600 hover:bg-red-50 group transition-colors duration-150",onClick:()=>s(t),children:[(0,a.jsx)(d.A,{className:"w-4 h-4 opacity-70 group-hover:opacity-100"}),"Delete Node"]}),(0,a.jsxs)("button",{className:"flex w-full items-center gap-2 px-3 py-2 rounded-md text-left text-sm font-medium text-blue-600 hover:bg-blue-50 group transition-colors duration-150",onClick:()=>l(t),children:[(0,a.jsx)(m.A,{className:"w-4 h-4 opacity-70 group-hover:opacity-100"}),"Duplicate Node"]}),(0,a.jsxs)("button",{className:"flex w-full items-center gap-2 px-3 py-2 rounded-md text-left text-sm font-medium text-purple-600 hover:bg-purple-50 group transition-colors duration-150",onClick:()=>o(t),children:[(0,a.jsx)(x.A,{className:"w-4 h-4 opacity-70 group-hover:opacity-100"}),"More Details"]})]})]})})};var g=s(3403);let p={eventTrigger:{from:"#3B82F6",to:"#60A5FA"},dateTime:{from:"#F59E0B",to:"#FBBF24"},condition:{from:"#8B5CF6",to:"#A78BFA"},filter:{from:"#EC4899",to:"#F472B6"},timeout:{from:"#F59E0B",to:"#FBBF24"},approval:{from:"#D97706",to:"#FBBF24"},rateLimit:{from:"#DC2626",to:"#F87171"},notification:{from:"#3B82F6",to:"#60A5FA"},webhook:{from:"#059669",to:"#10B981"},auditLog:{from:"#7C3AED",to:"#A78BFA"},debugger:{from:"#10B981",to:"#34D399"},"ai-analysis":{from:"#6366F1",to:"#818CF8"}},h=(e,t,s,a)=>"".concat(e,"-to-").concat(t,"-gradient-").concat(s<=a?"ltr":"rtl"),b=(e,t,s,a)=>{let l=h(e,t,s,a);return{stroke:"url(#".concat(l,")"),strokeWidth:2,animation:"dash 2s linear infinite"}},f=["eventTrigger","dateTime","condition","filter","timeout","approval","rateLimit","notification","webhook","auditLog","debugger","ai-analysis"],y=()=>{let e=[];return f.forEach(t=>{f.forEach(s=>{let a=h(t,s,0,100),r=p[t],n=p[s];e.push(l.createElement("linearGradient",{key:a,id:a,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},l.createElement("stop",{offset:"0%",stopColor:r.from}),l.createElement("stop",{offset:"50%",stopColor:r.to}),l.createElement("stop",{offset:"100%",stopColor:n.to})));let o=h(t,s,100,0);e.push(l.createElement("linearGradient",{key:o,id:o,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},l.createElement("stop",{offset:"0%",stopColor:n.to}),l.createElement("stop",{offset:"50%",stopColor:n.from}),l.createElement("stop",{offset:"50%",stopColor:r.to}),l.createElement("stop",{offset:"100%",stopColor:r.from})))})}),e};var j=s(4035),v=s(9827),N=s(7087);let w=(0,v.v)(e=>({dialog:null,setDialog:t=>e({dialog:t}),clearAutomation:()=>{let{clearAutomation:t}=j.R.getState();e({dialog:{isOpen:!0,title:"Clear Automation",message:"Are you sure you want to clear all nodes and edges? This action cannot be undone.",type:"danger",confirmText:"Clear All",cancelText:"Keep",onConfirm:()=>{t(),e({dialog:null})},onCancel:()=>e({dialog:null})}})},saveAutomation:async()=>{e({dialog:{isOpen:!0,title:"Save Automation",message:"Do you want to save your current automation?",type:"info",confirmText:"Save",cancelText:"Cancel",onConfirm:async()=>{try{await N.h.getState().saveCurrentFlow(),e({dialog:{isOpen:!0,title:"Success",message:"Automation has been saved successfully!",type:"info",confirmText:"OK",cancelText:null,onConfirm:()=>e({dialog:null}),onCancel:()=>e({dialog:null})}})}catch(t){e({dialog:{isOpen:!0,title:"Error",message:"Failed to save automation. Please try again.",type:"danger",confirmText:"Try Again",cancelText:"Cancel",onConfirm:()=>w.getState().saveAutomation(),onCancel:()=>e({dialog:null})}})}},onCancel:()=>e({dialog:null})}})}}));var A=s(4714),C=s(3540),k=s(8983),S=s(5525),T=s(6929),E=s(6889),D=s(2423),_=s(3473),F=s(8236),L=s(4430);let R=e=>({setNodes:e.setNodes,nodes:e.nodes,removeEdge:e.removeEdge,setEdges:e.setEdges,edges:e.edges}),B=[{type:"sensor",label:"Sensor Node",icon:C.A},{type:"condition",label:"Condition Node",icon:k.A},{type:"filter",label:"Filter Node",icon:S.A},{type:"debugger",label:"Debugger Node",icon:T.A},{type:"timeout",label:"Timeout Node",icon:E.A},{type:"dateTime",label:"Date & Time Node",icon:D.A}],O=(0,l.memo)(e=>{let{edgeId:t,source:s,target:r}=e,{setNodes:o,nodes:i=[],removeEdge:c,setEdges:m,edges:x=[]}=(0,j.R)((0,A.k)(R)),[u,g]=(0,l.useState)(!1),p=e=>{let a=i.find(e=>e.id===s),l=i.find(e=>e.id===r);if(a&&l&&o&&m){let n={x:(a.position.x+l.position.x)/2,y:(a.position.y+l.position.y)/2},c="".concat(e,"-").concat(Date.now()),d={id:c,type:e,position:n,data:{label:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Node"),..."condition"===e&&{if:[{"==":[{var:"payload"},"idle"]}],operator:"=="},..."filter"===e&&{operator:"==",filterValue:0,valueType:"number"},..."debugger"===e&&{logs:[],isActive:!0},..."timeout"===e&&{duration:60,isActive:!1},..."datetime"===e&&{time:"00:00",date:new Date().toISOString().split("T")[0],isActive:!0,repeat:!1,days:[]}}},u=[{id:"edge-".concat(s,"-").concat(c),source:s,target:c,type:"custom",animated:!0},{id:"edge-".concat(c,"-").concat(r),source:c,target:r,type:"custom",animated:!0}];o([...i,d]),m([...x.filter(e=>e.id!==t),...u]),g(!1)}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200 p-1.5 transform transition-all duration-200 hover:scale-105",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("button",{onClick:()=>{c&&c(t)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors group",title:"Delete Edge",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-gray-600 group-hover:text-red-500"})}),(0,a.jsx)("div",{className:"h-4 w-px bg-gray-200"}),(0,a.jsx)("button",{onClick:()=>g(!u),className:"p-2 hover:bg-blue-50 rounded-lg transition-colors group",title:"Add Node",children:(0,a.jsx)(_.A,{className:"w-4 h-4 text-gray-600 group-hover:text-blue-500"})}),(0,a.jsx)("button",{className:"p-2 hover:bg-purple-50 rounded-lg transition-colors group",title:"Edge Settings",children:(0,a.jsx)(F.A,{className:"w-4 h-4 text-gray-600 group-hover:text-purple-500"})}),(0,a.jsx)("button",{className:"p-2 hover:bg-green-50 rounded-lg transition-colors group",title:"Reconnect",children:(0,a.jsx)(L.A,{className:"w-4 h-4 text-gray-600 group-hover:text-green-500"})})]})}),u&&(0,a.jsxs)("div",{className:"fixed z-[9999] -left-[210px] -top-[] w-48 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",style:{transform:"translate(".concat(window.scrollX+10,"px, ").concat(window.scrollY+10,"px)")},children:[(0,a.jsxs)("div",{className:"p-2 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Add Node"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(n.A,{className:"w-4 h-4 text-gray-500"})})]}),(0,a.jsx)("div",{className:"py-1",children:B.map(e=>(0,a.jsxs)("button",{onClick:()=>p(e.type),className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:(0,a.jsx)(e.icon,{})}),(0,a.jsx)("span",{children:e.label})]},e.type))})]})]})});var M=s(886),P=s(7072),I=s(9257),W=s(3938),z=s(1023),V=s(1544),X=s(1726),U=s(8283),H=s(6122),G=s(4081),q=s(2792),J=s(8207),K=s(7364),Y=s(9053),Z=s(7224);let Q=e=>({dialog:e.dialog,setDialog:e.setDialog,clearAutomation:e.clearAutomation,saveAutomation:e.saveAutomation}),$=[{key:"triggers",label:"Triggers",icon:M.A,color:"#3B82F6",description:"Start automation flows",nodes:[{type:"eventTrigger",label:"Event Trigger",icon:P.A,description:"Stripe, Wallet, Ledger events"},{type:"dateTime",label:"Schedule",icon:E.A,description:"Time-based triggers (cron)"}]},{key:"logic",label:"Logic",icon:I.A,color:"#8B5CF6",description:"Decision making & flow control",nodes:[{type:"condition",label:"Condition",icon:k.A,description:"If/else branching"},{type:"filter",label:"Filter",icon:S.A,description:"Filter by criteria"},{type:"timeout",label:"Delay",icon:W.A,description:"Wait before continuing"},{type:"approval",label:"Approval",icon:z.A,description:"Human approval step"},{type:"rateLimit",label:"Rate Limit",icon:V.A,description:"Prevent action flooding"}]},{key:"actions",label:"Actions",icon:X.A,color:"#10B981",description:"Output operations",nodes:[{type:"notification",label:"Notification",icon:U.A,description:"WhatsApp, Email, Slack"},{type:"webhook",label:"Webhook",icon:H.A,description:"HTTP requests"},{type:"auditLog",label:"Audit Log",icon:G.A,description:"Create audit entries"}]},{key:"utilities",label:"Utilities",icon:q.A,color:"#F59E0B",description:"Debugging & analysis",nodes:[{type:"debugger",label:"Debugger",icon:T.A,description:"Log and inspect data"},{type:"ai-analysis",label:"AI Analysis",icon:J.A,description:"AI-powered analysis"}]}],ee=e=>{let{onDragStart:t}=e,s=(0,l.useRef)(null),[r,n]=(0,l.useState)(!0),[o,i]=(0,l.useState)(["triggers","logic","actions"]),{saveAutomation:c,clearAutomation:m}=w((0,A.k)(Q)),x=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,l.useEffect)(()=>{let e=e=>{s.current&&!s.current.contains(e.target)&&n(!0)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,l.useEffect)(()=>{let e=e=>{e.ctrlKey&&"e"===e.key&&n(!r)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[r]),(0,a.jsxs)("div",{ref:s,className:"\n        h-screen relative transform transition-all duration-300\n        ".concat(r?"w-5":"w-80","\n        bg-white shadow-lg\n      "),children:[(0,a.jsx)("button",{className:"\n          absolute z-10 -right-3 top-6\n          p-1.5 rounded-full shadow-md\n          ".concat(r?"bg-blue-500 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-800","\n          text-white transition-all duration-200\n        "),onClick:()=>n(!r),children:r?(0,a.jsx)(Y.A,{size:16}):(0,a.jsx)(K.A,{size:16})}),!r&&(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"p-5 border-b border-gray-100",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Automation Nodes"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Drag to create flows"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:$.map(e=>{let s=o.includes(e.key),l=e.icon;return(0,a.jsxs)("div",{className:"border-b border-gray-100",children:[(0,a.jsxs)("button",{onClick:()=>x(e.key),className:"w-full px-5 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l,{className:"w-5 h-5",style:{color:e.color}}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-800",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,a.jsx)("div",{className:"transform transition-transform ".concat(s?"rotate-90":""),children:(0,a.jsx)(Y.A,{size:16,className:"text-gray-400"})})]}),s&&(0,a.jsx)("div",{className:"px-3 pb-3 space-y-2",children:e.nodes.map(s=>{let l=s.icon,r=p[s.type]||{from:e.color,to:e.color};return(0,a.jsx)("div",{draggable:!0,onDragStart:e=>t(e,s.type),className:"\n                              group relative p-3 rounded-lg cursor-grab\n                              border-2 bg-white\n                              hover:shadow-md active:shadow-lg\n                              transition-all duration-200\n                            ",style:{borderColor:r.from+"40"},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:r.from+"15"},children:(0,a.jsx)(l,{className:"w-4 h-4",style:{color:r.from}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:s.label}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:s.description})]})]})},s.type)})})]},e.key)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[(0,a.jsxs)("button",{onClick:c,className:"\n                cursor-pointer\n                flex items-center justify-center gap-2 w-full\n                px-4 py-2.5 rounded-lg\n                bg-blue-500 hover:bg-blue-600\n                text-white font-medium transition-colors\n              ",children:[(0,a.jsx)(Z.A,{size:18}),"Save Flow"]}),(0,a.jsxs)("button",{onClick:m,className:"\n                cursor-pointer\n                flex items-center justify-center gap-2 w-full\n                px-4 py-2 rounded-lg\n                bg-red-50 hover:bg-red-100\n                text-red-600 font-medium transition-colors\n              ",children:[(0,a.jsx)(d.A,{size:16}),"Clear"]})]})]})]})};var et=s(6967);let es=["number","text"],ea=[">=","<=","==",">","<","!="],el={number:e=>Number(e),text:e=>String(e)};var er=s(7964),en=s(8639),eo=s(7647);let ei={number:Number,text:String};var ec=s(5471),ed=s(6745),em=s(1594),ex=s(4857);let eu=(0,l.memo)(e=>{var t;let{data:s,handleUpdate:l}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(ed.A,{className:"w-6 h-6 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Debugger Settings"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Monitor and configure logging"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(em.A,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Log Level"})]}),(0,a.jsxs)("select",{value:s.logLevel,onChange:e=>{l({logLevel:e.target.value})},className:"px-3 py-1 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,a.jsx)("option",{value:"info",children:"Info"}),(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"error",children:"Error"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ed.A,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-scroll"})]}),(0,a.jsx)("button",{onClick:()=>{l({autoScroll:!s.autoScroll})},className:"p-2 rounded-full transition-colors ".concat(s.autoScroll?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:(0,a.jsx)(ed.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Recent Logs"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{l({logs:[]})},className:"p-1 rounded-full hover:bg-gray-100 transition-colors",title:"Clear Logs",children:(0,a.jsx)(d.A,{className:"w-4 h-4 text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(s.logs,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="debugger-logs.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},className:"p-1 rounded-full hover:bg-gray-100 transition-colors",title:"Export Logs",children:(0,a.jsx)(ex.A,{className:"w-4 h-4 text-gray-500"})})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:null===(t=s.logs)||void 0===t?void 0:t.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ed.A,{className:"w-4 h-4 ".concat("info"===e.level?"text-blue-500":"warning"===e.level?"text-yellow-500":"text-red-500")}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.message})]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp})]},t))})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(s.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:s.isActive?"Active":"Inactive"})]})})]})});var eg=s(590),ep=s(7725),eh=s(2104);let eb=(0,l.memo)(e=>{let{data:t,handleUpdate:s}=e,l=new Date().getHours()>=6&&18>new Date().getHours(),r=p.dateTime,n=e=>{var a;let l=null!==(a=t.activeDays)&&void 0!==a?a:[];s({activeDays:l.includes(e)?l.filter(t=>t!==e):[...l,e].sort((e,t)=>e-t)})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(D.A,{className:"w-6 h-6",style:{color:r.from}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"DateTime Settings"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Configure time and schedule"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Time"})]}),(0,a.jsx)("input",{type:"time",value:t.time,onChange:e=>{s({time:e.target.value})},className:"px-3 py-1 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date"})]}),(0,a.jsx)("input",{type:"date",value:t.date,onChange:e=>{s({date:e.target.value})},className:"px-3 py-1 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eg.A,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Repeat"})]}),(0,a.jsx)("button",{onClick:()=>{s({repeat:!t.repeat})},className:"p-2 rounded-full transition-colors ".concat(t.repeat?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:(0,a.jsx)(eg.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l?(0,a.jsx)(ep.A,{className:"w-5 h-5 text-yellow-500"}):(0,a.jsx)(eh.A,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Time of Day"})]}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:l?"Day":"Night"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Active Days"}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2",children:["S","M","T","W","T","F","S"].map((e,s)=>{var l;return(0,a.jsx)("button",{onClick:()=>n(s),className:"w-10 h-10 rounded-full flex items-center justify-center text-sm transition-colors ".concat((null===(l=t.activeDays)||void 0===l?void 0:l.includes(s))?"bg-purple-100 text-purple-700 hover:bg-purple-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"),children:e},s)})})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(t.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:t.isActive?"Active":"Inactive"})]})})]})}),ef=e=>({closeMoreDetails:e.closeMoreDetails,updateNodeData:e.updateNodeData}),ey={condition:e=>{var t,s,r,n;let{data:o,handleUpdate:i}=e,c=null!==(r=null===(t=o.if)||void 0===t?void 0:t[0])&&void 0!==r?r:{},d=o.operator,[m,x]=(0,l.useState)("number"),[u,g]=(0,l.useState)(null!==(n=null===(s=c[d])||void 0===s?void 0:s[1])&&void 0!==n?n:""),[p,h]=(0,l.useState)(String(o.outputTruePath||"")),[b,f]=(0,l.useState)(String(o.outputFalsePath||""));return(0,l.useEffect)(()=>{if(c[d]){let e=c[d][1],t=typeof e;"string"===t?x("text"):"number"===t&&x("number"),g(e)}},[c,d]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(er.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Value Type"})]}),(0,a.jsx)("select",{value:m,onChange:e=>{let t=e.target.value,s={...c,[d]:[c[d][0],ei[t](c[d][1])]};x(t),i({if:[s]})},className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white",children:es.map(e=>(0,a.jsx)("option",{value:e,className:"py-1",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(en.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Compare Value"})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number"===m?"number":"text",defaultValue:u,onBlur:e=>{let t=e.target.value;c[d][1]=t,i({if:[c]})},className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 placeholder:text-gray-400",placeholder:"Enter ".concat(m," value")})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(eo.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Comparison Operator"})]}),(0,a.jsx)("select",{defaultValue:o.operator,onChange:e=>{let t=e.target.value;c[t]=c[d],delete c[d],i({if:[c],operator:t})},className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 bg-white",children:ea.map(e=>(0,a.jsx)("option",{value:e,className:"py-1",children:e},e))})]}),(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-gray-50 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Current Expression"}),(0,a.jsxs)("div",{className:"font-mono text-sm",children:[(0,a.jsx)("span",{className:"text-purple-600",children:"if"}),(0,a.jsxs)("span",{className:"text-gray-600",children:[" (",void 0!==o.value?String(o.value):"value",") "]}),(0,a.jsx)("span",{className:"text-purple-600",children:o.operator}),(0,a.jsxs)("span",{className:"text-gray-600",children:[" (",u,")"]})]})]})}),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Configure how the condition should evaluate incoming values"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,a.jsx)(U.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Output True Path"})]}),(0,a.jsxs)("div",{className:"grid grid-row-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",value:p,onChange:e=>h(e.target.value),onBlur:()=>i({outputTruePath:p}),placeholder:"Value to send if true",className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-sm"})," "]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,a.jsx)(U.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Output False Path"})]}),(0,a.jsx)("input",{type:"text",value:b,onChange:e=>f(e.target.value),onBlur:()=>i({outputFalsePath:b}),placeholder:"Value to send if false",className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-sm"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter values to send when condition evaluates to true or false"})]})]})},filter:e=>{let{data:t,handleUpdate:s}=e,[r,n]=(0,l.useState)(t.valueType||"number"),[o,i]=(0,l.useState)(t.filterValue||0),[c,d]=(0,l.useState)(t.operator||"==");return(0,l.useEffect)(()=>{n(t.valueType||"number"),i(t.filterValue||0),d(t.operator||"==")},[t.valueType,t.filterValue,t.operator]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(ec.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Label"})]}),(0,a.jsx)("input",{className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 placeholder:text-gray-400",placeholder:"Enter filter label",defaultValue:t.label,onBlur:e=>{s({label:e.target.value})}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(V.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Current Input Value"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50  rounded-lg border border-gray-200",children:(0,a.jsx)("span",{className:"\n            px-3 py-1 rounded-full text-sm font-medium\n            ".concat(t.value?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600","\n          "),children:void 0!==t.value?String(t.value):"Waiting for input"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(er.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Value Type"})]}),(0,a.jsxs)("select",{value:r,onChange:e=>{let t=e.target.value;n(t);let a=o;a="number"===t?Number(o):String(o),s({valueType:t,filterValue:a})},className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 bg-white",children:[(0,a.jsx)("option",{value:"number",children:"Number"}),(0,a.jsx)("option",{value:"text",children:"Text"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(en.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Filter Value"})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number"===r?"number":"text",defaultValue:o,onBlur:e=>{let t=e.target.value;"number"===r&&(t=Number(t)),i(t),s({filterValue:t})},className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 placeholder:text-gray-400",placeholder:"Enter ".concat(r," value")})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(eo.A,{className:"w-4 h-4"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Comparison Operator"})]}),(0,a.jsx)("select",{value:c,onChange:e=>{let t=e.target.value;d(t),s({operator:t})},className:"w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 bg-white",children:ea.map(e=>(0,a.jsx)("option",{value:e,className:"py-1",children:e},e))})]}),(0,a.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-gray-50 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Current Filter Expression"}),(0,a.jsxs)("div",{className:"font-mono text-sm",children:[(0,a.jsx)("span",{className:"text-indigo-600",children:"if"}),(0,a.jsx)("span",{className:"text-gray-600",children:" (value) "}),(0,a.jsx)("span",{className:"text-indigo-600",children:c}),(0,a.jsxs)("span",{className:"text-gray-600",children:[" (","text"===r?"'".concat(o,"'"):o,")"]})]})]})}),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Configure how the filter should process incoming values"})})]})},dateTime:eb,debugger:eu},ej=function(e){let{id:t,type:s,data:r}=e,{closeMoreDetails:o,updateNodeData:i}=(0,j.R)((0,A.k)(ef)),c=(0,l.useRef)(null),d=(0,l.createElement)(ey[s],{data:r,handleUpdate:e=>{i(t,e)}});return(0,l.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&o()}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]),(0,a.jsx)("div",{className:"fixed inset-y-0 right-0 w-80 bg-white shadow-2xl transform transition-transform duration-300 ease-in-out",children:(0,a.jsxs)("div",{ref:c,className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Node Details"})]}),(0,a.jsx)("button",{onClick:o,className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,a.jsx)(n.A,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Node ID"}),(0,a.jsx)("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Type"}),(0,a.jsxs)("span",{className:"\n                  text-sm px-3 py-1 rounded-full\n                  ".concat("sensor"===s?"bg-blue-100 text-blue-700":"condition"===s?"bg-purple-100 text-purple-700":"actuator"===s?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700","\n                "),children:[" ",s||"Unknown"]})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,a.jsx)(et.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Configuration"})]}),(0,a.jsx)("div",{className:"space-y-4",children:d})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Changes are automatically saved"})})]})})};var ev=s(3950);class eN{static evaluate(e){let{value:t,operator:s,target:a,type:l}=e,r=el[l](t),n=el[l](a),o=!isNaN(Number(r))||!isNaN(Number(n)),i=o?Number(r):r,c=o?Number(n):n,d={">":(e,t)=>e>t,"<":(e,t)=>e<t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,contains:(e,t)=>String(e).includes(String(t)),not_contains:(e,t)=>!String(e).includes(String(t)),starts_with:(e,t)=>String(e).startsWith(String(t)),ends_with:(e,t)=>String(e).endsWith(String(t)),regex:(e,t)=>new RegExp(String(t)).test(String(e))}[s];return!!d&&d(i,c)}}let ew=e=>{let{currentValue:t,condition:s,payload:l}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2  font-mono text-sm p-2 rounded-lg bg-white/50 backdrop-blur-sm shadow-inner",children:[(0,a.jsx)("span",{className:"text-purple-700",children:"if"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-100 rounded text-purple-700",children:String(t)}),(0,a.jsx)("span",{className:"text-purple-500 font-bold",children:s}),(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-100 rounded text-purple-700",children:l})]})},eA=e=>({getSourceNodes:e.getSourceNodes}),eC=(0,l.memo)(e=>{var t,s,n,o,i,c;let{data:d,selected:m,id:x,isConnectable:u}=e,h=Object.keys(d.if[0])[0],b=null!==(o=null===(n=d.if)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:null===(t=s[h])||void 0===t?void 0:t[1])&&void 0!==o?o:"",[f,y]=(0,l.useState)(!1),[v,N]=(0,l.useState)("number"),{getSourceNodes:w}=(0,j.R)((0,A.k)(eA)),C=null!==(i=null==w?void 0:w(x))&&void 0!==i?i:[],S=(0,l.useRef)(d.value),T=p.condition,E=(0,l.useCallback)(()=>{if(Array.isArray(C)&&C.length>0&&S.current!==d.value){var e;S.current=d.value;let t=C[0],s=null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.value;return"string"==typeof s||"number"==typeof s?s:String(null!=s?s:"value")}return d.value},[C,d.value]);(0,l.useEffect)(()=>{let e=typeof E();"number"===e?N("number"):"string"===e&&N("text")},[E,d.value]),(0,l.useEffect)(()=>{var e;let t=null!==(e=E())&&void 0!==e?e:"value";y(eN.evaluate({operator:h,value:t,target:b,type:v}))},[E,h,b,v]);let D=null!==(c=E())&&void 0!==c?c:"value";return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(m?T.from:"white")},className:"\n        shadow-lg rounded-lg border-2\n        ".concat(f?"bg-green-50":"bg-red-50","\n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[250px]\n      "),children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg  flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(T.from,", ").concat(T.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Condition"})]}),(0,a.jsx)(ev.A,{className:"w-4 h-4 transition-opacity\n            ".concat(f?"opacity-0":"opacity-100")})]}),(0,a.jsx)("div",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(ew,{currentValue:D,condition:h,payload:b}),(0,a.jsx)("div",{className:"\n            text-center text-sm font-medium rounded-full px-3 py-1\n            transition-colors duration-300\n            ".concat(f?"bg-green-100 text-green-700":"bg-red-100 text-red-700","\n          "),children:f?"Condition Met":"Condition Not Met"})]})}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-white border-2 border-gray-200 transition-all duration-300 ease-in-out\n                    ".concat(f?"bg-green-50 border-green-500":"bg-red-50  border-red-500"),children:[(0,a.jsxs)("div",{className:"flex justify-center gap-8 px-4 py-2 border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium\n                          transition-colors duration-300\n                          ".concat(f?"text-green-600":"text-gray-400"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300 \n                          ".concat(f?"bg-green-500":"bg-gray-300")}),(0,a.jsx)("span",{children:"True Path"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium\n                          transition-colors duration-300\n                          ".concat(f?"text-gray-400":"text-red-600"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors duration-300\n                          ".concat(f?"bg-gray-300":"bg-red-500")}),(0,a.jsx)("span",{children:"False Path"})]})]}),(0,a.jsx)(r.h7,{type:"target",className:"react-flow__handle-target",position:g.yX.Top,style:{top:-4,backgroundColor:T.from},isConnectable:u}),(0,a.jsx)(r.h7,{type:"source",className:"react-flow__handle-source true-path",position:g.yX.Bottom,style:{bottom:-4},id:"true",isConnectable:u}),(0,a.jsx)(r.h7,{type:"source",className:"react-flow__handle-source false-path",position:g.yX.Bottom,style:{bottom:-4,backgroundColor:"#EF4444"},id:"false",isConnectable:u})]})]})});var ek=s(5288),eS=s(5560),eT=s(1902),eE=s(1719),eD=s(6336),e_=s(5340);let eF=e=>({getTargetNodes:e.getTargetNodes,updateNodeData:e.updateNodeData,getSourceNodes:e.getSourceNodes}),eL=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(null),[x,u]=(0,l.useState)(!1),[h,b]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[v,N]=(0,l.useState)(s.isAlertEnabled),[w,C]=(0,l.useState)([]),{getTargetNodes:k,updateNodeData:T,getSourceNodes:E}=(0,j.R)((0,A.k)(eF)),D=p.filter;return(0,l.useEffect)(()=>{var e;let s;let a=null!==(e=null==E?void 0:E(t))&&void 0!==e?e:[];if(a.length>0)return a.forEach(e=>{e&&e.data&&e.data.value!==i&&void 0!==e.data.value&&(c(e.data.value),u(!0),s=setTimeout(()=>u(!1),1e3))}),()=>{clearTimeout(s)}},[t,E,i,s.value]),(0,l.useEffect)(()=>{if(null!==i){b(!0);let a={value:i,operator:s.operator,target:s.filterValue,type:s.valueType},l=eN.evaluate(a);try{if(C(e=>[{value:i,passed:l,timestamp:new Date().toLocaleTimeString()},...e].slice(0,5)),l){var e;m(i);let s=null!==(e=null==k?void 0:k(t))&&void 0!==e?e:[];s.length>0&&s.forEach(e=>{e&&(null==T||T(e.id,{value:i}))})}else v&&console.log("Filter alert: Value did not pass filter condition")}catch(e){console.error("Error in filter operation:",e)}setTimeout(()=>b(!1),500)}},[i,t,s.operator,s.filterValue,s.valueType,k,T,v]),(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?D.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-200 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[150px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg  flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(D.from,", ").concat(D.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Filter"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=!v;N(e),null==T||T(t,{isAlertEnabled:e})},className:"p-1 rounded-full transition-colors ".concat(v?"bg-white/20":"hover:bg-white/20"),title:v?"Disable Alerts":"Enable Alerts",children:v?(0,a.jsx)(ek.A,{className:"w-4 h-4"}):(0,a.jsx)(eS.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>y(!f),className:"p-1 rounded-full hover:bg-white/20 transition-colors",title:"Advanced Settings",children:f?(0,a.jsx)(eT.A,{className:"w-4 h-4"}):(0,a.jsx)(eE.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex gap-2 mb-2",children:(0,a.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md text-sm font-mono",value:s.operator||"==",onChange:e=>null==T?void 0:T(t,{operator:e.target.value}),children:[(0,a.jsx)("option",{value:">",children:"> (Greater than)"}),(0,a.jsx)("option",{value:"<",children:"< (Less than)"}),(0,a.jsx)("option",{value:">=",children:">= (Greater or eq)"}),(0,a.jsx)("option",{value:"<=",children:"<= (Less or eq)"}),(0,a.jsx)("option",{value:"==",children:"== (Equal)"}),(0,a.jsx)("option",{value:"!=",children:"!= (Not equal)"}),(0,a.jsx)("option",{value:"contains",children:"contains"}),(0,a.jsx)("option",{value:"not_contains",children:"not contains"}),(0,a.jsx)("option",{value:"starts_with",children:"starts with"}),(0,a.jsx)("option",{value:"ends_with",children:"ends with"}),(0,a.jsx)("option",{value:"regex",children:"regex match"})]})}),(0,a.jsx)(ew,{currentValue:i,condition:s.operator,payload:s.filterValue}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Input:"}),(0,a.jsx)("div",{className:"\n                  px-3 py-1 rounded-full text-sm font-medium\n                  ".concat(null!==i?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-600","\n                  ").concat(x?"animate-pulse":"","\n                "),children:null!==i?i:"Waiting..."})]})}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Output:"}),(0,a.jsx)("div",{className:"\n                  px-3 py-1 rounded-full text-sm font-medium\n                  ".concat(null!==d?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600","\n                  ").concat(h?"animate-pulse":"","\n                "),children:null!==d?d:"No data passed"})]})})]}),f&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(null!==d?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:null!==d?"Active":"Inactive"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Alerts:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(v?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:v?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Recent Activity:"}),(0,a.jsx)("div",{className:"space-y-2",children:w.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.passed?(0,a.jsx)(eD.A,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(e_.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-gray-600",children:e.value})]}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:e.timestamp})]},t))})]})]})})]})}),(0,a.jsx)(r.h7,{type:"target",position:g.yX.Top,id:"target",style:{top:-4,backgroundColor:D.from},className:"react-flow__handle-target",isConnectable:o}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"source",style:{bottom:-4,backgroundColor:D.from},className:"react-flow__handle-source",isConnectable:o})]})}),eR=e=>({getSourceNodes:e.getSourceNodes,updateNodeData:e.updateNodeData}),eB=(0,l.memo)(e=>{var t;let{data:s,selected:n,id:o,isConnectable:i}=e,[c,d]=(0,l.useState)(new Date),[m,x]=(0,l.useState)(s.isActive),[u,h]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),y=p.dateTime,{getSourceNodes:v,updateNodeData:N}=(0,j.R)((0,A.k)(eR)),w=null!==(t=null==v?void 0:v(o))&&void 0!==t?t:[];(0,l.useEffect)(()=>{let e=setInterval(()=>{let e=new Date;if(d(e),m&&s.time){let[a,l]=s.time.split(":").map(Number),r=e.getHours()===a&&e.getMinutes()===l;if(r&&!u){var t;h(!0),null==s||null===(t=s.onTrigger)||void 0===t||t.call(s)}else r||h(!1)}},1e3);return()=>clearInterval(e)},[s.time,m,u,s.onTrigger]);let C=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),k=e=>{var t;let a=(null===(t=s.activeDays)||void 0===t?void 0:t.includes(e))?s.activeDays.filter(t=>t!==e):[...s.activeDays||[],e];null==N||N(o,{data:{...s,activeDays:a}})};return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?y.from:"white")},className:"\n        bg-white\n        shadow-lg rounded-lg border-2\n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[300px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg  flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(y.from,", ").concat(y.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Date & Time"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=!m;x(e),null==N||N(o,{data:{...s,isActive:e}})},className:"p-1 rounded-full hover:bg-white/20 transition-colors",title:m?"Deactivate":"Activate",children:m?(0,a.jsx)(ek.A,{className:"w-4 h-4"}):(0,a.jsx)(eS.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>f(!b),className:"p-1 rounded-full hover:bg-white/20 transition-colors",title:"Advanced Settings",children:b?(0,a.jsx)(eT.A,{className:"w-4 h-4"}):(0,a.jsx)(eE.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Current Time:"}),(0,a.jsx)("span",{className:"font-medium",children:C(c)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Current Date:"}),(0,a.jsx)("span",{className:"font-medium",children:c.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Time of Day:"}),(0,a.jsx)("span",{className:"flex items-center gap-1",children:(()=>{let e=c.getHours();return e>=6&&e<18})()?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ep.A,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsx)("span",{className:"text-yellow-600",children:"Daytime"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh.A,{className:"w-4 h-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-blue-600",children:"Nighttime"})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Scheduled Time:"}),(0,a.jsx)("input",{type:"time",value:s.time,onChange:e=>{null==N||N(o,{data:{...s,time:e.target.value}})},className:"px-2 py-1 border rounded-md text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Date:"}),(0,a.jsx)("input",{type:"date",value:s.date,onChange:e=>{null==N||N(o,{data:{...s,date:e.target.value}})},className:"px-2 py-1 border rounded-md text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Repeat:"}),(0,a.jsx)("button",{onClick:()=>{null==N||N(o,{data:{...s,repeat:!s.repeat}})},className:"p-1 rounded-full transition-colors ".concat(s.repeat?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"),children:(0,a.jsx)(eg.A,{className:"w-4 h-4"})})]})]}),b&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Next Trigger:"}),(0,a.jsx)("span",{className:"font-medium text-blue-600",children:(()=>{if(!s.time||!m)return"Not scheduled";let[e,t]=s.time.split(":").map(Number),a=new Date;return a.setHours(e,t,0,0),a<c&&a.setDate(a.getDate()+1),C(a)})()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium\n                    ".concat(u?"bg-green-100 text-green-700":m?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:u?"Triggered":m?"Active":"Inactive"})]}),s.repeat&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Active Days:"}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e,t)=>{var l;return(0,a.jsx)("button",{onClick:()=>k(t),className:"text-center text-xs py-1 rounded transition-colors ".concat((null===(l=s.activeDays)||void 0===l?void 0:l.includes(t))?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-400 hover:bg-gray-200"),children:e},e)})})]})]})}),w.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,a.jsx)(eD.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Connected Sensors"})]}),(0,a.jsx)("div",{className:"space-y-2",children:w.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.label}),(0,a.jsx)("span",{className:"font-medium",children:null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.value})]},null==e?void 0:e.id)})})]})]})}),(0,a.jsx)(r.h7,{type:"target",position:g.yX.Top,className:"react-flow__handle-target",style:{top:-4,backgroundColor:y.from},isConnectable:i}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,className:"react-flow__handle-source",style:{bottom:-4,backgroundColor:y.from},isConnectable:i})]})});var eO=s(8617),eM=s(853);let eP=e=>({getSourceNodes:e.getSourceNodes,updateNodeData:e.updateNodeData}),eI=(0,l.memo)(e=>{var t,s;let{data:n,selected:o,id:i,isConnectable:c}=e,{getSourceNodes:m,updateNodeData:x}=(0,j.R)((0,A.k)(eP)),u=p.debugger,h=(0,l.useRef)({}),[b,f]=(0,l.useState)(!1),[y,v]=(0,l.useState)(""),[N,w]=(0,l.useState)("all"),[C,k]=(0,l.useState)(!0),S=(0,l.useRef)(null),[E,D]=(0,l.useState)(null!==(s=null==m?void 0:m(i))&&void 0!==s?s:[]);(0,l.useEffect)(()=>{let e=[];E.forEach(t=>{var s;if(!(null==t?void 0:t.id)||!(null==t?void 0:null===(s=t.data)||void 0===s?void 0:s.value))return;console.log("data.value",t.data.value);let a=t.data.value;if(a!==h.current[t.id]){let s=new Date().toLocaleTimeString(),l="".concat(t.data.label,": ").concat(a);e.push({timestamp:s,message:l,level:"info"}),h.current[t.id]=a}}),e.length>0&&(null==x||x(i,{logs:[...n.logs||[],...e].slice(-100)}))},[E,i,x,m]),(0,l.useEffect)(()=>{C&&S.current&&S.current.scrollIntoView({behavior:"smooth"})},[n.logs,C]),(0,l.useEffect)(()=>{D((null==m?void 0:m(i))||[])},[m,i]);let _=e=>{switch(e){case"error":return(0,a.jsx)(em.A,{className:"w-4 h-4 text-red-500"});case"warning":return(0,a.jsx)(ev.A,{className:"w-4 h-4 text-yellow-500"});case"success":return(0,a.jsx)(eD.A,{className:"w-4 h-4 text-green-500"});default:return(0,a.jsx)(eO.A,{className:"w-4 h-4 text-blue-500"})}},F=e=>{switch(e){case"error":return"bg-red-100 text-red-700";case"warning":return"bg-yellow-100 text-yellow-700";case"success":return"bg-green-100 text-green-700";default:return"bg-blue-100 text-blue-700"}},L=(n.logs||[]).filter(e=>{let t=e.message.toLowerCase().includes(y.toLowerCase()),s="all"===N||e.level===N;return t&&s}),R=(n.logs||[]).reduce((e,t)=>(e[t.level]=(e[t.level]||0)+1,e),{});return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(o?u.from:"white")},className:"\n        bg-white\n        shadow-lg rounded-lg border-2\n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[300px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg  flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(u.from,", ").concat(u.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Debugger"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:[(null===(t=n.logs)||void 0===t?void 0:t.length)||0," logs"]}),E.length>0&&(0,a.jsxs)("div",{className:"text-xs bg-white/20 px-2 py-1 rounded-full flex items-center gap-1",children:[(0,a.jsx)(ed.A,{className:"w-3 h-3"}),E.length," sensors"]}),(0,a.jsx)("button",{onClick:()=>f(!b),className:"p-1 rounded-full hover:bg-white/20 transition-colors",title:"Advanced Settings",children:b?(0,a.jsx)(eT.A,{className:"w-4 h-4"}):(0,a.jsx)(eE.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(eM.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search logs...",value:y,onChange:e=>v(e.target.value),style:{border:"1px solid ".concat(u.from)},className:"w-full pl-8 pr-2 py-1 text-sm rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"text-sm border rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{border:"1px solid ".concat(u.from)},children:[(0,a.jsx)("option",{value:"all",children:"All Levels"}),(0,a.jsx)("option",{value:"info",children:"Info"}),(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"error",children:"Error"}),(0,a.jsx)("option",{value:"success",children:"Success"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Info:"}),(0,a.jsx)("span",{className:"font-medium",children:R.info||0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Warnings:"}),(0,a.jsx)("span",{className:"font-medium",children:R.warning||0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Errors:"}),(0,a.jsx)("span",{className:"font-medium",children:R.error||0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Success:"}),(0,a.jsx)("span",{className:"font-medium",children:R.success||0})]})]})]}),b&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Auto-scroll:"}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:C,onChange:e=>k(e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Actions:"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{null==x||x(i,{logs:[]})},className:"p-1 rounded-full bg-red-100 text-red-700 hover:bg-red-200 transition-colors",title:"Clear Logs",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(n.logs,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="debugger-logs-".concat(new Date().toISOString(),".json"),s.click(),URL.revokeObjectURL(t)},className:"p-1 rounded-full bg-green-100 text-green-700 hover:bg-green-200 transition-colors",title:"Export Logs",children:(0,a.jsx)(ex.A,{className:"w-4 h-4"})})]})]})]})}),E.length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,a.jsx)(ed.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Connected Sensors"})]}),(0,a.jsx)("div",{className:"space-y-2",children:E.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.label}),(0,a.jsx)("span",{className:"font-medium",children:null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.value})]},null==e?void 0:e.id)})})]}),(0,a.jsxs)("div",{className:"mt-4 max-h-[200px] overflow-y-auto",children:[L.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 py-2 border-b border-gray-100 last:border-0",children:[(0,a.jsx)("div",{className:"mt-1",children:_(e.level)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp}),(0,a.jsx)("span",{className:"text-xs font-medium px-2 py-1 rounded-full ".concat(F(e.level)),children:e.level})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.message})]})]},t)),(0,a.jsx)("div",{ref:S})]})]})}),(0,a.jsx)(r.h7,{type:"target",position:g.yX.Top,className:"react-flow__handle-target",style:{top:-4,backgroundColor:u.from},isConnectable:c})]})});var eW=s(9191),ez=s(2725),eV=s(1556);let eX=e=>({getSourceNodes:e.getSourceNodes,updateNodeData:e.updateNodeData}),eU=(0,l.memo)(e=>{var t;let{data:s,selected:n,id:o,isConnectable:i}=e,[c,d]=(0,l.useState)(s.remainingTime||s.duration),[m,x]=(0,l.useState)(s.isActive),[u,h]=(0,l.useState)(!1),[b,f]=(0,l.useState)(s.isAlertEnabled),y=p.timeout,{getSourceNodes:v,updateNodeData:N}=(0,j.R)((0,A.k)(eX)),w=null!==(t=null==v?void 0:v(o))&&void 0!==t?t:[];(0,l.useEffect)(()=>{let e;return m&&c>0&&(e=setInterval(()=>{d(e=>{if(e<=1){var t;return null===(t=s.onTimeout)||void 0===t||t.call(s),b&&console.log("Timeout alert triggered!"),0}return e-1})},1e3)),()=>clearInterval(e)},[m,c,s.onTimeout,b]);let C=e=>{if(isNaN(e))return"00:00";let t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(s.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))},k=()=>isNaN(c)||isNaN(s.duration)?0:c/s.duration*100;return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?y.from:"white")},className:"\n        bg-white\n        shadow-lg rounded-lg border-2\n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[300px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg  flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(y.from,", ").concat(y.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(W.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Timeout"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=!b;f(e),null==N||N(o,{isAlertEnabled:e})},className:"p-1 rounded-full transition-colors ".concat(b?"bg-white/20":"hover:bg-white/20"),title:b?"Disable Alert":"Enable Alert",children:b?(0,a.jsx)(ek.A,{className:"w-4 h-4"}):(0,a.jsx)(eS.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>h(!u),className:"p-1 rounded-full hover:bg-white/20 transition-colors",title:"Advanced Settings",children:u?(0,a.jsx)(eT.A,{className:"w-4 h-4"}):(0,a.jsx)(eE.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("div",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-gray-800",children:C(c)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[C(s.duration)," total duration"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(k(),"%"),backgroundColor:c>.3*s.duration?y.from:c>.1*s.duration?"#F59E0B":"#EF4444"}})}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[m?(0,a.jsx)("button",{onClick:()=>{x(!1),null==N||N(o,{isActive:!1})},className:"p-2 rounded-full bg-yellow-100 text-yellow-700 hover:bg-yellow-200 transition-colors",title:"Pause Timer",children:(0,a.jsx)(ez.A,{className:"w-5 h-5"})}):(0,a.jsx)("button",{onClick:()=>{x(!0),null==N||N(o,{isActive:!0})},className:"p-2 rounded-full bg-green-100 text-green-700 hover:bg-green-200 transition-colors",title:"Start Timer",children:(0,a.jsx)(eW.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{d(s.duration),x(!1),null==N||N(o,{isActive:!1,remainingTime:s.duration})},className:"p-2 rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",title:"Reset Timer",children:(0,a.jsx)(eV.A,{className:"w-5 h-5"})})]}),u&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Duration (seconds):"}),(0,a.jsx)("input",{type:"number",value:s.duration,onChange:e=>{let t=parseInt(e.target.value);!isNaN(t)&&t>0&&(null==N||N(o,{duration:t,remainingTime:t}),d(t))},min:"1",style:{border:"1px solid ".concat(y.from)},className:"px-2 py-1 rounded-md text-sm w-24"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(0===c?"bg-red-100 text-red-700":m?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:0===c?"Timed Out":m?"Running":"Paused"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Progress:"}),(0,a.jsxs)("span",{className:"font-medium text-blue-600",children:[k().toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Alert:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(b?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"),children:b?"Enabled":"Disabled"})]})]})}),w.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,a.jsx)(em.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Connected Sensors"})]}),(0,a.jsx)("div",{className:"space-y-2",children:w.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.label}),(0,a.jsx)("span",{className:"font-medium",children:null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.value})]},null==e?void 0:e.id)})})]})]})}),(0,a.jsx)(r.h7,{type:"target",position:g.yX.Top,className:"react-flow__handle-target",style:{top:-4,backgroundColor:y.from},isConnectable:i}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,className:"react-flow__handle-source",style:{bottom:-4,backgroundColor:y.from},isConnectable:i})]})});var eH=s(98),eG=s(4505);let eq=e=>({updateNodeData:e.updateNodeData}),eJ=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(s.instruction||""),[d]=(0,l.useState)(s.result||"No analysis results yet"),[m,x]=(0,l.useState)(s.value||"Waiting for input..."),{updateNodeData:u}=(0,j.R)((0,A.k)(eq));(0,l.useEffect)(()=>{void 0!==s.value&&x(s.value)},[s.value]),(0,l.useEffect)(()=>{null==u||u(t,{instruction:i,result:d})},[i,d,t,u]);let h=p.debugger;return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?h.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-200 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[280px]\n      ",children:[(0,a.jsx)(r.h7,{type:"target",position:g.yX.Top,id:"target",style:{top:-4,backgroundColor:h.from},className:"react-flow__handle-target",isConnectable:o}),(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg  flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(h.from,", ").concat(h.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"AI Analysis"})]}),(0,a.jsx)(eH.A,{className:"w-4 h-4"})]}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium mr-2",children:"Input Data:"}),(0,a.jsx)("span",{className:"font-mono text-xs bg-gray-200 px-2 py-0.5 rounded truncate max-w-[180px]",children:String(m)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600 block",children:"Analysis Instruction:"}),(0,a.jsx)("textarea",{className:"w-full p-2 border border-gray-300 rounded-md text-sm h-20 resize-none",placeholder:"E.g., 'Count objects in this image' or 'Analyze this temperature reading'",value:i,onChange:e=>c(e.target.value)})]}),(0,a.jsx)("button",{disabled:s.isProcessing,className:"\n              w-full py-2 px-3 rounded-md\n              text-white font-medium text-sm\n              flex items-center justify-center gap-2\n              transition-colors duration-200\n              ".concat(s.isProcessing?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700","\n            "),children:s.isProcessing?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eG.A,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eH.A,{className:"w-4 h-4"}),"Run Analysis"]})}),s.error&&(0,a.jsx)("div",{className:"text-red-500 text-xs mt-1 bg-red-50 p-2 rounded",children:s.error}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Analysis Result:"}),(0,a.jsx)("div",{className:"bg-white p-3 border border-gray-300 rounded-md text-sm min-h-[60px] overflow-auto",children:d})]})]})}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"source",style:{bottom:-4,backgroundColor:h.to},className:"react-flow__handle-source",isConnectable:o})]})}),eK={stripe:"Stripe",wallet:"Wallet",ledger:"Ledger",system:"System",manual:"Manual"},eY={stripe:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},wallet:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},ledger:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},system:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"},manual:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"}},eZ={stripe:["payment.succeeded","payment.failed","payment.pending","refund.created","refund.failed","dispute.created","charge.succeeded","charge.failed"],wallet:["wallet.created","wallet.balance_changed","wallet.low_balance","wallet.credited","wallet.debited","wallet.frozen","wallet.unfrozen"],ledger:["transaction.created","transaction.posted","transaction.failed","entry.created","account.created","account.updated"],system:["schedule.triggered","manual.triggered","automation.started","automation.completed","automation.failed"],manual:["manual.triggered"]},eQ=e=>({updateNodeData:e.updateNodeData,getTargetNodes:e.getTargetNodes}),e$=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),{updateNodeData:x,getTargetNodes:u}=(0,j.R)((0,A.k)(eQ)),h=p.eventTrigger,b=s.source?eY[s.source]:null,f=e=>{null==x||x(t,{source:e,eventType:null}),c(!1)},y=e=>{var a;null==x||x(t,{eventType:e}),m(!1),(null!==(a=null==u?void 0:u(t))&&void 0!==a?a:[]).forEach(t=>{t&&(null==x||x(t.id,{sourceTrigger:{source:s.source,eventType:e}}))})};return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?h.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-200 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[280px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(h.from,", ").concat(h.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Event Trigger"})]}),(0,a.jsx)(ed.A,{className:"w-4 h-4 transition-all duration-200\n            ".concat(s.isActive?"text-green-300 scale-125":"text-white scale-100")})]}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Event Source"}),(0,a.jsxs)("button",{onClick:()=>c(!i),className:"\n              w-full flex items-center justify-between\n              px-3 py-2 rounded-lg border-2\n              ".concat(b?"".concat(b.bg," ").concat(b.border):"bg-white border-gray-200","\n              hover:border-gray-300 transition-colors\n            "),children:[(0,a.jsx)("span",{className:"font-medium ".concat((null==b?void 0:b.text)||"text-gray-600"),children:s.source?eK[s.source]:"Select source..."}),(0,a.jsx)(eE.A,{className:"w-4 h-4 text-gray-400"})]}),i&&(0,a.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:Object.keys(eK).map(e=>(0,a.jsx)("button",{onClick:()=>f(e),className:"\n                    w-full px-3 py-2 text-left hover:bg-gray-50\n                    first:rounded-t-lg last:rounded-b-lg\n                    ".concat(s.source===e?"bg-blue-50 text-blue-700":"text-gray-700","\n                  "),children:eK[e]},e))})]}),s.source&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Event Type"}),(0,a.jsxs)("button",{onClick:()=>m(!d),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border-2 border-gray-200 bg-white hover:border-gray-300 transition-colors",children:[(0,a.jsx)("span",{className:"font-mono text-sm ".concat(s.eventType?"text-gray-800":"text-gray-400"),children:s.eventType||"Select event type..."}),(0,a.jsx)(eE.A,{className:"w-4 h-4 text-gray-400"})]}),d&&(0,a.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:eZ[s.source].map(e=>(0,a.jsx)("button",{onClick:()=>y(e),className:"\n                      w-full px-3 py-2 text-left font-mono text-sm hover:bg-gray-50\n                      first:rounded-t-lg last:rounded-b-lg\n                      ".concat(s.eventType===e?"bg-blue-50 text-blue-700":"text-gray-700","\n                    "),children:e},e))})]}),s.lastEvent&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-xs",children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Last event:"}),(0,a.jsx)("div",{className:"font-mono text-gray-700 truncate",children:s.lastEvent.id}),(0,a.jsx)("div",{className:"text-gray-400",children:new Date(s.lastEvent.timestamp).toLocaleTimeString()})]})]}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"source",style:{bottom:-4,backgroundColor:h.to},className:"react-flow__handle-source",isConnectable:o})]})});var e0=s(3348),e2=s(6462);let e1={whatsapp:{label:"WhatsApp",icon:e0.A,color:"#25D366",placeholder:"+1234567890"},email:{label:"Email",icon:e2.A,color:"#EA4335",placeholder:"user@example.com"},slack:{label:"Slack",icon:e0.A,color:"#4A154B",placeholder:"#channel or @user"},discord:{label:"Discord",icon:e0.A,color:"#5865F2",placeholder:"Webhook URL"},sms:{label:"SMS",icon:e0.A,color:"#0088CC",placeholder:"+1234567890"}},e4=e=>({updateNodeData:e.updateNodeData}),e5=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(!1),{updateNodeData:d}=(0,j.R)((0,A.k)(e4)),m=p.notification,x=e1[s.channel]||e1.email,u=x.icon,h=e=>{null==d||d(t,{channel:e,recipient:""}),c(!1)},b=e=>{null==d||d(t,{recipient:e})},f=e=>{null==d||d(t,{template:e})};return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?null==m?void 0:m.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[280px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(null==m?void 0:m.from,", ").concat(null==m?void 0:m.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Notification"})]}),(0,a.jsx)(ed.A,{className:"w-4 h-4 transition-all duration-200\n            ".concat("sending"===s.status?"text-yellow-300 scale-125 animate-pulse":"text-white scale-100")})]}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Channel"}),(0,a.jsxs)("button",{onClick:()=>c(!i),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border-2 border-gray-200 bg-white hover:border-gray-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-4 h-4",style:{color:x.color}}),(0,a.jsx)("span",{className:"font-medium text-gray-700",children:x.label})]}),(0,a.jsx)(eE.A,{className:"w-4 h-4 text-gray-400"})]}),i&&(0,a.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:Object.keys(e1).map(e=>{let t=e1[e],l=t.icon;return(0,a.jsxs)("button",{onClick:()=>h(e),className:"\n                      w-full px-3 py-2 text-left flex items-center gap-2 hover:bg-gray-50\n                      first:rounded-t-lg last:rounded-b-lg\n                      ".concat(s.channel===e?"bg-blue-50":"","\n                    "),children:[(0,a.jsx)(l,{className:"w-4 h-4",style:{color:t.color}}),(0,a.jsx)("span",{className:"text-gray-700",children:t.label})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Recipient"}),(0,a.jsx)("input",{type:"text",value:s.recipient||"",onChange:e=>b(e.target.value),placeholder:x.placeholder,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Message Template"}),(0,a.jsx)("textarea",{value:s.template||"",onChange:e=>f(e.target.value),placeholder:"Payment of {{amount}} failed for {{customer}}...",rows:2,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none resize-none"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{field}}"," for dynamic values"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({idle:"bg-gray-100 text-gray-600",sending:"bg-yellow-100 text-yellow-700",sent:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700"}[s.status||"idle"]),children:s.status||"idle"})]})]}),(0,a.jsx)(r.h7,{type:"target",isConnectable:o,position:g.yX.Top,style:{top:-6,backgroundColor:null==m?void 0:m.from},className:"react-flow__handle-target"}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"source",style:{bottom:-4,backgroundColor:null==m?void 0:m.to},className:"react-flow__handle-source",isConnectable:o})]})});var e3=s(1024);let e6={GET:"bg-green-100 text-green-700 border-green-300",POST:"bg-blue-100 text-blue-700 border-blue-300",PUT:"bg-yellow-100 text-yellow-700 border-yellow-300",PATCH:"bg-orange-100 text-orange-700 border-orange-300",DELETE:"bg-red-100 text-red-700 border-red-300"},e7=e=>({updateNodeData:e.updateNodeData}),e8=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),{updateNodeData:x}=(0,j.R)((0,A.k)(e7)),u={from:"#059669",to:"#10B981"},p=e=>{null==x||x(t,{method:e}),c(!1)},h=e=>{null==x||x(t,{url:e})},b=e=>{null==x||x(t,{body:e})};return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?u.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[300px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(u.from,", ").concat(u.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Webhook"})]}),(0,a.jsx)(ed.A,{className:"w-4 h-4 transition-all duration-200\n            ".concat("pending"===s.status?"text-yellow-300 scale-125 animate-pulse":"text-white scale-100")})]}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>c(!i),className:"\n                px-3 py-2 rounded-lg border-2 font-mono text-sm font-bold\n                ".concat(e6[s.method||"POST"],"\n              "),children:[s.method||"POST",(0,a.jsx)(eE.A,{className:"w-3 h-3 inline ml-1"})]}),i&&(0,a.jsx)("div",{className:"absolute z-20 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:["GET","POST","PUT","PATCH","DELETE"].map(e=>(0,a.jsx)("button",{onClick:()=>p(e),className:"\n                      w-full px-3 py-2 text-left font-mono text-sm font-bold\n                      hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg\n                      ".concat(e6[e],"\n                    "),children:e},e))})]}),(0,a.jsx)("input",{type:"text",value:s.url||"",onChange:e=>h(e.target.value),placeholder:"https://api.example.com/webhook",className:"flex-1 px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm font-mono focus:border-blue-400 focus:outline-none"})]}),"GET"!==s.method&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>m(!d),className:"flex items-center gap-2 text-xs text-gray-500 hover:text-gray-700",children:[(0,a.jsx)(e3.A,{className:"w-3 h-3"}),d?"Hide":"Edit"," Request Body"]}),d&&(0,a.jsx)("textarea",{value:s.body||"",onChange:e=>b(e.target.value),placeholder:'{"event": "{{event.type}}", "data": {{event.payload}}}',rows:3,className:"w-full mt-2 px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm font-mono focus:border-blue-400 focus:outline-none resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({idle:"bg-gray-100 text-gray-600",pending:"bg-yellow-100 text-yellow-700",success:"bg-green-100 text-green-700",error:"bg-red-100 text-red-700"}[s.status||"idle"]),children:[s.status||"idle",s.lastResponse&&" (".concat(s.lastResponse.statusCode,")")]})]})]}),(0,a.jsx)(r.h7,{type:"target",isConnectable:o,position:g.yX.Top,style:{top:-6,backgroundColor:u.from},className:"react-flow__handle-target"}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"source",style:{bottom:-4,backgroundColor:u.to},className:"react-flow__handle-source",isConnectable:o})]})}),e9={info:{label:"Info",color:"text-blue-600",bgColor:"bg-blue-100"},warning:{label:"Warning",color:"text-yellow-600",bgColor:"bg-yellow-100"},error:{label:"Error",color:"text-red-600",bgColor:"bg-red-100"},critical:{label:"Critical",color:"text-red-800",bgColor:"bg-red-200"}},te=e=>({updateNodeData:e.updateNodeData}),tt=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(!1),{updateNodeData:d}=(0,j.R)((0,A.k)(te)),m={from:"#7C3AED",to:"#A78BFA"},x=e=>{null==d||d(t,{severity:e}),c(!1)},u=e=>{null==d||d(t,{action:e})},p=e=>{null==d||d(t,{description:e})},h=e9[s.severity||"info"];return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?m.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[280px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(m.from,", ").concat(m.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Audit Log"})]}),(0,a.jsx)(ed.A,{className:"w-4 h-4 transition-all duration-200\n            ".concat("logging"===s.status?"text-yellow-300 scale-125 animate-pulse":"text-white scale-100")})]}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Action Name"}),(0,a.jsx)("input",{type:"text",value:s.action||"",onChange:e=>u(e.target.value),placeholder:"payment_failed_alert_sent",className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm font-mono focus:border-blue-400 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Severity"}),(0,a.jsxs)("button",{onClick:()=>c(!i),className:"\n              w-full flex items-center justify-between\n              px-3 py-2 rounded-lg border-2 border-gray-200\n              ".concat(h.bgColor,"\n            "),children:[(0,a.jsx)("span",{className:"font-medium ".concat(h.color),children:h.label}),(0,a.jsx)(eE.A,{className:"w-4 h-4 text-gray-400"})]}),i&&(0,a.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:Object.keys(e9).map(e=>{let t=e9[e];return(0,a.jsx)("button",{onClick:()=>x(e),className:"\n                      w-full px-3 py-2 text-left hover:bg-gray-50\n                      first:rounded-t-lg last:rounded-b-lg\n                      ".concat(t.color,"\n                    "),children:t.label},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Description"}),(0,a.jsx)("textarea",{value:s.description||"",onChange:e=>p(e.target.value),placeholder:"Alert sent for payment failure of {{amount}}...",rows:2,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none resize-none"})]}),s.lastLogId&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Last log: ",(0,a.jsx)("span",{className:"font-mono",children:s.lastLogId})]})]}),(0,a.jsx)(r.h7,{type:"target",isConnectable:o,position:g.yX.Top,style:{top:-6,backgroundColor:m.from},className:"react-flow__handle-target"}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"source",style:{bottom:-4,backgroundColor:m.to},className:"react-flow__handle-source",isConnectable:o})]})});var ts=s(3239);let ta={admin:{label:"Admin",description:"Organization admin"},finance:{label:"Finance",description:"Finance team member"},manager:{label:"Manager",description:"Team manager"},any:{label:"Any User",description:"Any authenticated user"}},tl=e=>({updateNodeData:e.updateNodeData}),tr=(0,l.memo)(e=>{let{id:t,data:s,selected:n,isConnectable:o}=e,[i,c]=(0,l.useState)(!1),{updateNodeData:d}=(0,j.R)((0,A.k)(tl)),m={from:"#D97706",to:"#FBBF24"},x=e=>{null==d||d(t,{approverRole:e}),c(!1)},u=e=>{null==d||d(t,{timeoutHours:e})},p=e=>{null==d||d(t,{message:e})},h={idle:{icon:E.A,color:"text-gray-500",bg:"bg-gray-100"},pending:{icon:E.A,color:"text-yellow-600",bg:"bg-yellow-100"},approved:{icon:ts.A,color:"text-green-600",bg:"bg-green-100"},rejected:{icon:e_.A,color:"text-red-600",bg:"bg-red-100"},timeout:{icon:E.A,color:"text-orange-600",bg:"bg-orange-100"}}[s.status||"idle"],b=h.icon;return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(n?m.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[280px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(m.from,", ").concat(m.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Approval Required"})]}),(0,a.jsx)(b,{className:"w-4 h-4 ".concat("pending"===s.status?"animate-pulse":"")})]}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Approver Role"}),(0,a.jsxs)("button",{onClick:()=>c(!i),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border-2 border-gray-200 bg-white hover:border-gray-300 transition-colors",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:ta[s.approverRole||"admin"].label}),(0,a.jsx)(eE.A,{className:"w-4 h-4 text-gray-400"})]}),i&&(0,a.jsx)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:Object.keys(ta).map(e=>{let t=ta[e];return(0,a.jsxs)("button",{onClick:()=>x(e),className:"\n                      w-full px-3 py-2 text-left hover:bg-gray-50\n                      first:rounded-t-lg last:rounded-b-lg\n                    ",children:[(0,a.jsx)("div",{className:"font-medium text-gray-700",children:t.label}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:t.description})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Timeout (hours)"}),(0,a.jsx)("input",{type:"number",min:1,max:168,value:s.timeoutHours||24,onChange:e=>u(parseInt(e.target.value)||24),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Approval Message"}),(0,a.jsx)("textarea",{value:s.message||"",onChange:e=>p(e.target.value),placeholder:"Please approve payment of {{amount}} for {{customer}}...",rows:2,className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none resize-none"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg ".concat(h.bg),children:[(0,a.jsx)(b,{className:"w-4 h-4 ".concat(h.color)}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(h.color),children:"idle"===s.status?"Waiting for trigger":"pending"===s.status?"Awaiting approval":"approved"===s.status?"Approved".concat(s.approvedBy?" by ".concat(s.approvedBy):""):"rejected"===s.status?"Rejected":"Timed out"})]})]}),(0,a.jsx)(r.h7,{type:"target",isConnectable:o,position:g.yX.Top,style:{top:-6,backgroundColor:m.from},className:"react-flow__handle-target"}),(0,a.jsx)("div",{className:"px-4 py-2 bg-white rounded-b-lg border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-center gap-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[(0,a.jsx)(ts.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Approved"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[(0,a.jsx)(e_.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Rejected/Timeout"})]})]})}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"approved",style:{left:"30%",bottom:-4,backgroundColor:"#10B981"},className:"react-flow__handle-source",isConnectable:o}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"rejected",style:{left:"70%",bottom:-4,backgroundColor:"#EF4444"},className:"react-flow__handle-source",isConnectable:o})]})}),tn={second:"per second",minute:"per minute",hour:"per hour",day:"per day"},to=e=>({updateNodeData:e.updateNodeData}),ti={eventTrigger:e$,dateTime:eB,condition:eC,filter:eL,timeout:eU,approval:tr,rateLimit:(0,l.memo)(e=>{let{id:t,data:s,selected:l,isConnectable:n}=e,{updateNodeData:o}=(0,j.R)((0,A.k)(to)),i={from:"#DC2626",to:"#F87171"},c=e=>{null==o||o(t,{limit:e})},d=e=>{null==o||o(t,{timeUnit:e})},m=e=>{null==o||o(t,{burstAllowance:e})},x=s.limit>0?Math.min((s.currentCount||0)/s.limit*100,100):0;return(0,a.jsxs)("div",{style:{border:"2px solid ".concat(l?i.from:"white")},className:"\n        shadow-lg rounded-lg bg-white border-2 \n        transition-all duration-300 ease-in-out\n        hover:shadow-xl transform hover:-translate-y-1\n        min-w-[260px]\n      ",children:[(0,a.jsxs)("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{background:"linear-gradient(to right, ".concat(i.from,", ").concat(i.to,")")},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold truncate",children:s.label||"Rate Limit"})]}),(0,a.jsx)(ed.A,{className:"w-4 h-4 ".concat("blocked"===s.status?"text-yellow-300":"text-white")})]}),(0,a.jsxs)("div",{className:"px-4 py-3 bg-gray-50 space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Max Requests"}),(0,a.jsx)("input",{type:"number",min:1,value:s.limit||10,onChange:e=>c(parseInt(e.target.value)||10),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Time Window"}),(0,a.jsx)("select",{value:s.timeUnit||"minute",onChange:e=>d(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none",children:Object.keys(tn).map(e=>(0,a.jsx)("option",{value:e,children:tn[e]},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs font-medium text-gray-500 mb-1 block",children:"Burst Allowance"}),(0,a.jsx)("input",{type:"number",min:0,value:s.burstAllowance||0,onChange:e=>m(parseInt(e.target.value)||0),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 bg-white text-sm focus:border-blue-400 focus:outline-none"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Extra requests allowed in burst mode"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,a.jsx)("span",{children:"Usage"}),(0,a.jsxs)("span",{children:[s.currentCount||0," / ",s.limit||10]})]}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all duration-300 ".concat(x>=100?"bg-red-500":x>=80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(x,"%")}})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Status"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({idle:"bg-gray-100 text-gray-600",allowed:"bg-green-100 text-green-700",blocked:"bg-red-100 text-red-700"}[s.status||"idle"]),children:s.status||"idle"})]})]}),(0,a.jsx)("div",{className:"px-4 py-2 bg-white rounded-b-lg border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex justify-center gap-8 text-xs",children:[(0,a.jsx)("span",{className:"text-green-600",children:" Allowed"}),(0,a.jsx)("span",{className:"text-red-600",children:" Blocked"})]})}),(0,a.jsx)(r.h7,{type:"target",isConnectable:n,position:g.yX.Top,style:{top:-6,backgroundColor:i.from},className:"react-flow__handle-target"}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"allowed",style:{left:"30%",bottom:-4,backgroundColor:"#10B981"},className:"react-flow__handle-source",isConnectable:n}),(0,a.jsx)(r.h7,{type:"source",position:g.yX.Bottom,id:"blocked",style:{left:"70%",bottom:-4,backgroundColor:"#EF4444"},className:"react-flow__handle-source",isConnectable:n})]})}),notification:e5,webhook:e8,auditLog:tt,debugger:eI,"ai-analysis":eJ},tc=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,[a,r]=(0,l.useState)(!1),n=(0,l.useRef)(null),o=(0,l.useRef)(null),i=()=>{let a=new WebSocket(e);n.current=a,a.onopen=()=>{console.log(" WebSocket connected"),r(!0),o.current&&clearTimeout(o.current)},a.onmessage=e=>{try{let s=JSON.parse(e.data);t(s)}catch(e){console.error(" Error parsing WebSocket message:",e)}},a.onclose=()=>{console.warn(" WebSocket disconnected, attempting to reconnect..."),r(!1),o.current=setTimeout(i,s)},a.onerror=e=>{console.error(" WebSocket error:",e),a.close()}};return(0,l.useEffect)(()=>(i(),()=>{n.current&&n.current.close(),o.current&&clearTimeout(o.current)}),[e]),{isConnected:a,sendMessage:e=>{n.current&&n.current.readyState===WebSocket.OPEN?n.current.send(JSON.stringify(e)):console.warn(" Cannot send message, WebSocket is not open")}}};s(5460),s(6419),s(3349);var td=s(1099);let tm=e=>({addToast:e.addToast,removeToast:e.removeToast}),tx=e=>{let{position:t="top-right"}=e,{toasters:s,removeToast:r}=(0,td.A)((0,A.k)(tm));return(0,l.useEffect)(()=>{null==s||s.forEach(e=>{let t=setTimeout(()=>{null==r||r(e.id)},3e3);return()=>clearTimeout(t)})},[s,r]),(0,a.jsx)("div",{className:"fixed p-4 space-y-2 z-50 ".concat((()=>{switch(t){case"top-right":default:return"top-0 right-0";case"top-left":return"top-0 left-0";case"bottom-right":return"bottom-0 right-0";case"bottom-left":return"bottom-0 left-0"}})()),children:(0,a.jsx)(o.N,{children:null==s?void 0:s.map(e=>(0,a.jsx)(i.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"p-4 rounded shadow-md text-white ".concat("success"===e.status?"bg-green-500":"error"===e.status?"bg-red-500":"info"===e.status?"bg-blue-500":"bg-yellow-500"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold",children:e.title}),(0,a.jsx)("p",{children:e.description})]}),(0,a.jsx)("button",{onClick:()=>null==r?void 0:r(e.id),className:"ml-4",children:"\xd7"})]})},e.id))})})};var tu=s(8621),tg=s(6308),tp=s(7780);function th(){let{currentFlowName:e,saveCurrentFlow:t,isSaving:s,createNewFlow:r,savedFlows:n,loadFlowConfig:o}=(0,N.h)(),[i,c]=(0,l.useState)(!1),{nodes:d,edges:m}=(0,j.R)(),{zone:x}=(0,tu.n)(),[u,g]=(0,l.useState)(e),[p,h]=(0,l.useState)("idle");(0,l.useEffect)(()=>{g(e)},[e]);let b=async()=>{h("idle");try{await t(),h("success"),setTimeout(()=>h("idle"),3e3)}catch(e){h("error"),setTimeout(()=>h("idle"),3e3)}},f=e=>{o(e),c(!1)};return(0,a.jsxs)("div",{className:"flex items-center justify-between w-full h-16 px-6 bg-white border-b border-gray-200 shadow-sm z-20",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>{let t=e.target.value;g(t),N.h.setState({currentFlowName:t})},className:"text-lg font-semibold bg-transparent border-none focus:outline-none focus:ring-0 p-0 text-gray-900 w-64",placeholder:"Unnamed Flow"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full mr-1.5 ".concat(x?"bg-green-500":"bg-gray-400")}),x?"Zone: ".concat(x.name):"No Zone Selected"]}),(0,a.jsx)("span",{children:""}),(0,a.jsxs)("span",{children:[d.length," Nodes"]}),(0,a.jsx)("span",{children:""}),(0,a.jsxs)("span",{children:[m.length," Edges"]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:["success"===p&&(0,a.jsxs)("span",{className:"flex items-center text-green-600 text-sm animate-in fade-in slide-in-from-right-2",children:[(0,a.jsx)(eD.A,{className:"w-4 h-4 mr-1"}),"Saved"]}),"error"===p&&(0,a.jsxs)("span",{className:"flex items-center text-red-600 text-sm animate-in fade-in slide-in-from-right-2",children:[(0,a.jsx)(em.A,{className:"w-4 h-4 mr-1"}),"Error Saving"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>c(!i),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors mr-2",children:[(0,a.jsx)(tg.A,{className:"w-4 h-4 mr-2"}),"Saved Flows",(0,a.jsx)(eE.A,{className:"w-4 h-4 ml-2 opacity-50"})]}),i&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-md shadow-lg py-1 z-30 max-h-96 overflow-y-auto",children:[(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"Your Automation Flows"}),0===n.length?(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-400 italic",children:"No flows found in this zone"}):n.map(e=>(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-[10px] text-gray-400 mt-0.5",children:["Updated ",new Date(e.updated_at).toLocaleDateString()]})]},e.id))]})]}),(0,a.jsxs)("button",{onClick:()=>r("Untitled Flow"),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(_.A,{className:"w-4 h-4 mr-2"}),"New"]}),(0,a.jsxs)("button",{onClick:b,disabled:s,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50 transition-all shadow-sm",children:[s?(0,a.jsx)(eG.A,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(tp.A,{className:"w-4 h-4 mr-2"}),"Save Flow"]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-200 mx-2"}),(0,a.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(F.A,{className:"w-5 h-5"})})]})]})}let tb={custom:function(e){let{id:t,sourceX:s,sourceY:n,targetX:o,targetY:i,sourcePosition:c,targetPosition:d,selected:m,source:x,target:u}=e,[p,h,f]=(0,g.Fp)({sourceX:s,sourceY:n,sourcePosition:c,targetX:o,targetY:i,targetPosition:d}),j=(0,l.useMemo)(()=>({...b(x.split("-")[0],u.split("-")[0],s,o),markerEnd:g.TG.ArrowClosed}),[x,u,s,n,o,i]),v=(0,l.useMemo)(()=>y(),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("defs",{children:[v,(0,a.jsxs)("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,a.jsxs)("feMerge",{children:[(0,a.jsx)("feMergeNode",{in:"coloredBlur"}),(0,a.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,a.jsx)("path",{id:t,className:"react-flow__edge-path-bg",d:p,strokeWidth:6,stroke:"#88888822",fill:"none"}),(0,a.jsx)(r.tE,{path:p,style:{strokeWidth:j.strokeWidth,stroke:j.stroke},markerEnd:j.markerEnd,className:"react-flow__edge-path ".concat(m?"selected":"")}),(0,a.jsx)(r.rV,{children:(0,a.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -50%) translate(".concat(h,"px,").concat(f,"px)"),pointerEvents:"all"},className:"nodrag nopan",children:m&&(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)(O,{edgeId:t,source:x,target:u})})})})})]})}},tf=e=>({dialog:e.dialog,setDialog:e.setDialog}),ty=e=>({nodes:e.nodes,edges:e.edges,onMoreDetails:e.onMoreDetails,nodeDetails:e.nodeDetails,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,setEdges:e.setEdges,setNodes:e.setNodes,deleteNode:e.deleteNode,duplicateNode:e.duplicateNode,onNodeContextMenu:e.onNodeContextMenu,onDrop:e.onDrop,setContextMenu:e.setContextMenu,contextMenu:e.contextMenu,closeMoreDetails:e.closeMoreDetails});function tj(){let e=(0,l.useRef)(null),{dialog:t,setDialog:s}=w((0,A.k)(tf)),{nodes:n,edges:o,setNodes:i,setEdges:d,onNodesChange:m,onEdgesChange:x,onConnect:g,deleteNode:p,duplicateNode:h,onDrop:b,onNodeContextMenu:f,contextMenu:y,setContextMenu:v,onMoreDetails:C,nodeDetails:k}=(0,j.R)((0,A.k)(ty)),{loadFlows:S,loadTemplates:T}=(0,N.h)();(0,l.useEffect)(()=>{S(),T()},[S,T]);let E=(0,l.useCallback)((t,s)=>{f(t,s,e)},[f]),D=(0,l.useCallback)(()=>v(null),[v]);return tc("ws://localhost:8080/events/stream",e=>{var t,s;(null===(t=e.nodes)||void 0===t?void 0:t.length)>0&&(null===(s=e.edges)||void 0===s?void 0:s.length)>0&&(i(e.nodes),d(e.edges))}),(0,a.jsxs)("div",{ref:e,className:"w-full h-full flex flex-col relative overflow-hidden bg-gray-50",children:[(0,a.jsx)(tx,{position:"top-right"}),(0,a.jsx)(th,{}),(0,a.jsxs)("div",{className:"flex-1 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute left-0 z-10 w-fit h-full",children:(0,a.jsx)(ee,{onDragStart:(e,t)=>{e.dataTransfer.setData("application/fintech-automation",t),e.dataTransfer.effectAllowed="move"}})}),(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsxs)(r.Gc,{nodes:n,nodeTypes:ti,onNodesChange:m,edges:o,edgeTypes:tb,onEdgesChange:x,onConnect:g,onPaneClick:D,onNodeContextMenu:E,onDrop:t=>b(t,e),onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},defaultEdgeOptions:{type:"custom",animated:!0},fitView:!0,children:[(0,a.jsx)(r.VS,{variant:r._5.Lines}),(0,a.jsx)(r.of,{}),(0,a.jsx)(r.H2,{})]})}),y&&(0,a.jsx)(u,{onMoreDetails:C,onDelete:p,onDuplicate:h,onClose:D,...y}),k&&(0,a.jsx)(ej,{...k})]}),t&&(0,a.jsx)(c,{isOpen:!0,title:t.title,message:t.message,onConfirm:()=>{t.onConfirm(),s(null)},onCancel:()=>s(null)})]})}},1099:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9827).v)(e=>({toasters:[],addToast:t=>{let s=Math.random().toString(36).substr(2,9);e(e=>({toasters:[...e.toasters,{...t,id:s}]}))},removeToast:t=>{e(e=>({toasters:e.toasters.filter(e=>e.id!==t)}))}}))},5460:()=>{},3349:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[13,862,295,498,581,646,87,441,517,358],()=>t(4403)),_N_E=e.O()}]);