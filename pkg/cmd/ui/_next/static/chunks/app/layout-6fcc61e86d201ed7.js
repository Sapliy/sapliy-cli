(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{6349:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,347,23)),Promise.resolve().then(l.bind(l,3980))},6745:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},1719:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},1476:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},719:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},8236:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2640:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},7072:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(7401).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6046:(e,t,l)=>{"use strict";var a=l(6658);l.o(a,"usePathname")&&l.d(t,{usePathname:function(){return a.usePathname}}),l.o(a,"useRouter")&&l.d(t,{useRouter:function(){return a.useRouter}})},3980:(e,t,l)=>{"use strict";l.d(t,{default:()=>k});var a=l(5155),s=l(8173),n=l.n(s),r=l(7072),o=l(7401);let i=(0,o.A)("git-graph",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v6",key:"158jrl"}],["circle",{cx:"5",cy:"18",r:"3",key:"104gr9"}],["path",{d:"M12 3v18",key:"108xh3"}],["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M16 15.7A9 9 0 0 0 19 9",key:"1e3vqb"}]]),c=(0,o.A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var d=l(1476),u=l(6745),h=l(719),x=l(8236),m=l(2115),p=l(2640),y=l(1719),g=l(3473);let v=e=>{let{zones:t,selectedZone:l,onSelect:s,onManage:n}=e,[o,i]=(0,m.useState)(!1);return(0,a.jsxs)("div",{className:"relative w-full px-2 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>i(!o),className:"\n                    flex items-center w-full p-2 rounded-lg border transition-all\n                    ".concat((null==l?void 0:l.mode)==="live"?"bg-green-50 border-green-200 text-green-700":"bg-blue-50 border-blue-200 text-blue-700","\n                "),children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center overflow-hidden",children:[(null==l?void 0:l.mode)==="live"?(0,a.jsx)(r.A,{className:"w-4 h-4 mr-2 flex-shrink-0"}):(0,a.jsx)(p.A,{className:"w-4 h-4 mr-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs font-bold truncate",children:(null==l?void 0:l.name)||"Select Zone"})]}),(0,a.jsx)(y.A,{className:"w-3 h-3 transition-transform ".concat(o?"rotate-180":"")})]}),o&&(0,a.jsxs)("div",{className:"absolute left-full ml-2 top-0 w-48 bg-white rounded-xl shadow-2xl border border-gray-100 py-2 z-[100] animate-in fade-in slide-in-from-left-2",children:[(0,a.jsx)("div",{className:"px-3 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Switch Zone"}),t.map(e=>(0,a.jsxs)("button",{onClick:()=>{s(e),i(!1)},className:"\n                                w-full flex items-center px-3 py-2 text-sm hover:bg-gray-50 transition-colors\n                                ".concat((null==l?void 0:l.id)===e.id?"text-blue-600 font-medium":"text-gray-600","\n                            "),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-3 ".concat("live"===e.mode?"bg-green-500 shadow-sm shadow-green-200":"bg-blue-500 shadow-sm shadow-blue-200")}),(0,a.jsxs)("div",{className:"flex flex-col items-start translate-y-[1px]",children:[(0,a.jsx)("span",{className:"text-xs leading-none mb-1",children:e.name}),(0,a.jsx)("span",{className:"text-[10px] opacity-60 uppercase",children:e.mode})]})]},e.id)),n&&(0,a.jsx)("div",{className:"border-t border-gray-50 mt-1 pt-1",children:(0,a.jsxs)("button",{onClick:n,className:"w-full flex items-center px-3 py-2 text-[11px] text-gray-500 hover:text-blue-600 transition-colors",children:[(0,a.jsx)(g.A,{className:"w-3 h-3 mr-2"}),"Manage Zones"]})})]})]})};var b=l(8621),f=l(6046);let w=[{to:"/",icon:r.A,label:"Dashboard"},{to:"/builder",icon:i,label:"Builder"},{to:"/templates",icon:c,label:"Templates"},{to:"/data",icon:d.A,label:"Data"},{to:"/timeline",icon:u.A,label:"Timeline"},{to:"/packages",icon:h.A,label:"Packages"},{to:"/settings",icon:x.A,label:"Settings"}],k=()=>{let e=(0,f.usePathname)(),{zones:t,zone:l,setZone:s}=(0,b.n)(),o=(0,f.useRouter)();return(0,a.jsxs)("div",{className:"w-60 bg-white border-r border-gray-100 flex flex-col h-screen",children:[(0,a.jsxs)("div",{className:"p-6 flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-lg shadow-blue-100",children:(0,a.jsx)(r.A,{className:"text-white w-5 h-5 fill-current"})}),(0,a.jsx)("span",{className:"text-xl font-bold tracking-tight text-gray-900",children:"Sapliy"})]}),(0,a.jsx)(v,{zones:t,selectedZone:l,onSelect:e=>s(e),onManage:()=>o.push("/settings/zones")}),(0,a.jsx)("nav",{className:"flex-1 w-full overflow-y-auto space-y-2 px-2",children:w.map(t=>{let l=e===t.to||"/"!==t.to&&(null==e?void 0:e.startsWith(t.to));return(0,a.jsx)(n(),{href:t.to,className:"\n                                flex flex-col items-center justify-center w-full aspect-square rounded-lg transition-all\n                                ".concat(l?"bg-blue-50 text-blue-600":"text-gray-400 hover:bg-gray-50 hover:text-gray-600","\n                            "),title:t.label,children:(0,a.jsx)(t.icon,{className:"w-5 h-5 mb-1"})},t.to)})})]})}},8621:(e,t,l)=>{"use strict";l.d(t,{n:()=>r});var a=l(9827),s=l(709);let n={admin:4,finance:3,developer:2,viewer:1},r=(0,a.v)()((0,s.Zr)((e,t)=>({user:null,organization:null,zone:null,zones:[],environment:"test",accessToken:null,isLoading:!1,error:null,setUser:t=>e({user:t}),setOrganization:t=>e({organization:t}),setZone:t=>e({zone:t,environment:(null==t?void 0:t.mode)||"test"}),setZones:t=>e({zones:t}),setEnvironment:t=>e({environment:t}),setAccessToken:t=>e({accessToken:t}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),login:async(e,l)=>{let{setLoading:a,setError:s,setUser:n,setAccessToken:r}=t();a(!0),s(null);try{let t=await fetch("".concat("http://localhost:3000/api/auth","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:l})});if(!t.ok)throw Error("Invalid credentials");let a=await t.json();r(a.access_token),n({id:a.user.id,email:a.user.email,name:a.user.name||e.split("@")[0],role:a.user.role||"developer"})}catch(e){throw s(e instanceof Error?e.message:"Login failed"),e}finally{a(!1)}},logout:()=>{e({user:null,organization:null,zone:null,zones:[],accessToken:null,error:null})},hasRole:e=>{let{user:l}=t();return!!l&&n[l.role]>=n[e]},canEdit:()=>{let{user:e}=t();return!!e&&["admin","finance","developer"].includes(e.role)},isAdmin:()=>{let{user:e}=t();return(null==e?void 0:e.role)==="admin"}}),{name:"fintech-auth-storage",partialize:e=>({accessToken:e.accessToken,user:e.user,organization:e.organization,zone:e.zone,zones:e.zones,environment:e.environment})}))},347:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[690,295,173,441,517,358],()=>t(6349)),_N_E=e.O()}]);